<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.280">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="An introductory resource for working with geographic data in Python">

<title>Geocomputation with Python - 7&nbsp; Geographic data I/O</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./09-mapping.html" rel="next">
<link href="./07-reproj.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Geographic data I/O</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Geocomputation with Python</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/geocompx/geocompy/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Share" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
            <i class="bi bi-bi-twitter pe-1"></i>
          Twitter
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
            <i class="bi bi-bi-linkedin pe-1"></i>
          LinkedIn
          </a>
        </li>
    </ul>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Welcome</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-spatial-data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Geographic data in Python</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-attribute-operations.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Attribute data operations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-spatial-operations.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Spatial data operations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-geometry-operations.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Geometry operations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-raster-vector.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Raster-vector interactions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-reproj.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Reprojecting geographic data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-read-write-plot.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Geographic data I/O</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-mapping.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Making maps with Python</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
  <h2 class="anchored">Note: The book is under construction üèó</h2>
  <ul>
    <li><a href="https://github.com/geocompr/py/issues" class="nav-link active" data-scroll-target="https\://github.com/geocompr/py/issues">Open an issue ‚ùî</a></li>
    <li><a href="https://discord.gg/PMztXYgNxp" class="nav-link" data-scroll-target="https\://discord.gg/PMztXYgNxp">Chat on Discord üì£</a></li>
  </ul>
  <hr>
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#prerequisites" id="toc-prerequisites" class="nav-link" data-scroll-target="#prerequisites"><span class="toc-section-number">7.1</span>  Prerequisites</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="toc-section-number">7.2</span>  Introduction</a></li>
  <li><a href="#sec-retrieving-open-data" id="toc-sec-retrieving-open-data" class="nav-link" data-scroll-target="#sec-retrieving-open-data"><span class="toc-section-number">7.3</span>  Retrieving open data</a></li>
  <li><a href="#sec-geographic-data-packages" id="toc-sec-geographic-data-packages" class="nav-link" data-scroll-target="#sec-geographic-data-packages"><span class="toc-section-number">7.4</span>  Geographic data packages</a></li>
  <li><a href="#geographic-web-services" id="toc-geographic-web-services" class="nav-link" data-scroll-target="#geographic-web-services"><span class="toc-section-number">7.5</span>  Geographic web services</a></li>
  <li><a href="#sec-file-formats" id="toc-sec-file-formats" class="nav-link" data-scroll-target="#sec-file-formats"><span class="toc-section-number">7.6</span>  File formats</a></li>
  <li><a href="#sec-data-input" id="toc-sec-data-input" class="nav-link" data-scroll-target="#sec-data-input"><span class="toc-section-number">7.7</span>  Data input (I)</a>
  <ul>
  <li><a href="#vector-data" id="toc-vector-data" class="nav-link" data-scroll-target="#vector-data"><span class="toc-section-number">7.7.1</span>  Vector data</a></li>
  <li><a href="#raster-data" id="toc-raster-data" class="nav-link" data-scroll-target="#raster-data"><span class="toc-section-number">7.7.2</span>  Raster data</a></li>
  </ul></li>
  <li><a href="#sec-data-output" id="toc-sec-data-output" class="nav-link" data-scroll-target="#sec-data-output"><span class="toc-section-number">7.8</span>  Data output (O)</a>
  <ul>
  <li><a href="#vector-data-1" id="toc-vector-data-1" class="nav-link" data-scroll-target="#vector-data-1"><span class="toc-section-number">7.8.1</span>  Vector data</a></li>
  <li><a href="#raster-data-1" id="toc-raster-data-1" class="nav-link" data-scroll-target="#raster-data-1"><span class="toc-section-number">7.8.2</span>  Raster data</a></li>
  </ul></li>
  <li><a href="#sec-visual-outputs" id="toc-sec-visual-outputs" class="nav-link" data-scroll-target="#sec-visual-outputs"><span class="toc-section-number">7.9</span>  Visual outputs</a></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises"><span class="toc-section-number">7.10</span>  Exercises</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/geocompx/geocompy/edit/main/08-read-write-plot.qmd" class="toc-action">Edit this page</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="read-write" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Geographic data I/O</span></span></h1>
</div>

<!--
-->


<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="prerequisites" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="prerequisites"><span class="header-section-number">7.1</span> Prerequisites</h2>
<p>This chapter requires the following packages, used in previous chapters:</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> fiona</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="introduction" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="introduction"><span class="header-section-number">7.2</span> Introduction</h2>
<p>This chapter is about reading and writing geographic data. Geographic data import is essential for geocomputation: real-world applications are impossible without data. Data output is also vital, enabling others to use valuable new or improved datasets resulting from your work. Taken together, these processes of import/output can be referred to as data I/O.</p>
<p>Geographic data I/O is often done with few lines of code at the beginning and end of projects. It is often overlooked as a simple one step process. However, mistakes made at the outset of projects (e.g.&nbsp;using an out-of-date or in some way faulty dataset) can lead to large problems later down the line, so it is worth putting considerable time into identifying which datasets are available, where they can be found and how to retrieve them. These topics are covered in <a href="#sec-retrieving-open-data"><span>Section&nbsp;7.3</span></a>, which describes various geoportals, which collectively contain many terabytes of data, and how to use them. To further ease data access, a number of packages for downloading geographic data have been developed, as described in <a href="#sec-geographic-data-packages"><span>Section&nbsp;7.4</span></a>.</p>
<p>There are many geographic file formats, each of which has pros and cons, described in <a href="#sec-file-formats"><span>Section&nbsp;7.6</span></a>. The process of reading and writing files in formats efficiently is covered in Sections <a href="#sec-data-input"><span>Section&nbsp;7.7</span></a> and <a href="#sec-data-output"><span>Section&nbsp;7.8</span></a>, respectively. The final Section <a href="#sec-visual-outputs"><span>Section&nbsp;7.9</span></a> demonstrates methods for saving visual outputs (maps), in preparation for <a href="09-mapping.html"><span>Chapter&nbsp;8</span></a> on visualization.</p>
</section>
<section id="sec-retrieving-open-data" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="sec-retrieving-open-data"><span class="header-section-number">7.3</span> Retrieving open data</h2>
</section>
<section id="sec-geographic-data-packages" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="sec-geographic-data-packages"><span class="header-section-number">7.4</span> Geographic data packages</h2>
</section>
<section id="geographic-web-services" class="level2" data-number="7.5">
<h2 data-number="7.5" class="anchored" data-anchor-id="geographic-web-services"><span class="header-section-number">7.5</span> Geographic web services</h2>
</section>
<section id="sec-file-formats" class="level2" data-number="7.6">
<h2 data-number="7.6" class="anchored" data-anchor-id="sec-file-formats"><span class="header-section-number">7.6</span> File formats</h2>
<p>Geographic datasets are usually stored as files or in spatial databases. File formats can either store vector or raster data, while spatial databases such as <a href="https://postgis.net/">PostGIS</a> can store both. The large variety of file formats may seem bewildering, but there has been much consolidation and standardization since the beginnings of GIS software in the 1960s when the first widely distributed program (<a href="https://news.harvard.edu/gazette/story/2011/10/the-invention-of-gis/">SYMAP</a>) for spatial analysis was created at Harvard University <span class="citation" data-cites="coppock_history_1991">[@coppock_history_1991]</span>.</p>
<p>GDAL (which should be pronounced ‚Äúgoo-dal‚Äù, with the double ‚Äúo‚Äù making a reference to object-orientation), the Geospatial Data Abstraction Library, has resolved many issues associated with incompatibility between geographic file formats since its release in 2000. GDAL provides a unified and high-performance interface for reading and writing of many raster and vector data formats. Many open and proprietary GIS programs, including GRASS, ArcGIS and QGIS, use GDAL behind their GUIs for doing the legwork of ingesting and spitting out geographic data in appropriate formats.</p>
<p>GDAL provides access to more than 200 vector and raster data formats. <a href="#tbl-file-formats">Table&nbsp;<span>7.1</span></a> presents some basic information about selected and often used spatial file formats.</p>
<div id="tbl-file-formats" class="anchored">
<table class="table">
<caption>Table&nbsp;7.1: Commonly used spatial data file formats</caption>
<colgroup>
<col style="width: 17%">
<col style="width: 13%">
<col style="width: 34%">
<col style="width: 17%">
<col style="width: 17%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Extension</th>
<th>Info</th>
<th>Type</th>
<th>Model</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ESRI Shapefile</td>
<td><code>.shp</code> (the main file)</td>
<td>Popular format consisting of at least three files. No support for: files &gt; 2GB;mixed types; names &gt; 10 chars; cols &gt; 255.</td>
<td>Vector</td>
<td>Partially open</td>
</tr>
<tr class="even">
<td>GeoJSON</td>
<td><code>.geojson</code></td>
<td>Extends the JSON exchange format by including a subset of the simple feature representation; mostly used for storing coordinates in longitude and latitude; it is extended by the TopoJSON format</td>
<td>Vector</td>
<td>Open</td>
</tr>
<tr class="odd">
<td>KML</td>
<td><code>.kml</code></td>
<td>XML-based format for spatial visualization, developed for use with Google Earth. Zipped KML file forms the KMZ format.</td>
<td>Vector</td>
<td>Open</td>
</tr>
<tr class="even">
<td>GPX</td>
<td><code>.gpx</code></td>
<td>XML schema created for exchange of GPS data.</td>
<td>Vector</td>
<td>Open</td>
</tr>
<tr class="odd">
<td>FlatGeobuf</td>
<td><code>.fgb</code></td>
<td>Single file format allowing for quick reading and writing of vector data. Has streaming capabilities.</td>
<td>Vector</td>
<td>Open</td>
</tr>
<tr class="even">
<td>GeoTIFF</td>
<td><code>.tif/.tiff</code></td>
<td>Popular raster format. A TIFF file containing additional spatial metadata.</td>
<td>Raster</td>
<td>Open</td>
</tr>
<tr class="odd">
<td>Arc ASCII</td>
<td><code>.asc</code></td>
<td>Text format where the first six lines represent the raster header, followed by the raster cell values arranged in rows and columns.</td>
<td>Raster</td>
<td>Open</td>
</tr>
<tr class="even">
<td>SQLite/SpatiaLite</td>
<td><code>.sqlite</code></td>
<td>Standalone relational database, SpatiaLite is the spatial extension of SQLite.</td>
<td>Vector and raster</td>
<td>Open</td>
</tr>
<tr class="odd">
<td>ESRI FileGDB</td>
<td><code>.gdb</code></td>
<td>Spatial and nonspatial objects created by ArcGIS. Allows: multiple feature classes; topology. Limited support from GDAL.</td>
<td>Vector and raster</td>
<td>Proprietary</td>
</tr>
<tr class="even">
<td>GeoPackage</td>
<td><code>.gpkg</code></td>
<td>Lightweight database container based on SQLite allowing an easy and platform-independent exchange of geodata</td>
<td>Vector and (very limited) raster</td>
<td>Open</td>
</tr>
</tbody>
</table>
</div>
<p>An important development ensuring the standardization and open-sourcing of file formats was the founding of the Open Geospatial Consortium (<a href="http://www.opengeospatial.org/">OGC</a>) in 1994. Beyond defining the simple features data model (see <a href="02-spatial-data.html#sec-simple-features"><span>Section&nbsp;1.2.4</span></a>), the OGC also coordinates the development of open standards, for example as used in file formats such as KML and GeoPackage. Open file formats of the kind endorsed by the OGC have several advantages over proprietary formats: the standards are published, ensure transparency and open up the possibility for users to further develop and adjust the file formats to their specific needs.</p>
<p>ESRI Shapefile is the most popular vector data exchange format; however, it is not an open format (though its specification is open). It was developed in the early 1990s and has a number of limitations. First of all, it is a multi-file format, which consists of at least three files. It only supports 255 columns, column names are restricted to ten characters and the file size limit is 2 GB. Furthermore, ESRI Shapefile does not support all possible geometry types, for example, it is unable to distinguish between a polygon and a multipolygon. Despite these limitations, a viable alternative had been missing for a long time. In the meantime, <a href="https://www.geopackage.org/">GeoPackage</a> emerged, and seems to be a more than suitable replacement candidate for ESRI Shapefile. GeoPackage is a format for exchanging geospatial information and an OGC standard. The GeoPackage standard describes the rules on how to store geospatial information in a tiny SQLite container. Hence, GeoPackage is a lightweight spatial database container, which allows the storage of vector and raster data but also of non-spatial data and extensions. Aside from GeoPackage, there are other geospatial data exchange formats worth checking out (<a href="#tbl-file-formats">Table&nbsp;<span>7.1</span></a>).</p>
<p>The GeoTIFF format seems to be the most prominent raster data format. It allows spatial information, such as the CRS definition and the transformation matrix (see <a href="02-spatial-data.html#sec-using-rasterio"><span>Section&nbsp;1.3.2</span></a>), to be embedded within a TIFF file. Similar to ESRI Shapefile, this format was firstly developed in the 1990s, but as an open format. Additionally, GeoTIFF is still being expanded and improved. One of the most significant recent addition to the GeoTIFF format is its variant called COG (Cloud Optimized GeoTIFF). Raster objects saved as COGs can be hosted on HTTP servers, so other people can read only parts of the file without downloading the whole file (see Sections 8.6.2 and 8.7.2‚Ä¶).</p>
<p>There is also a plethora of other spatial data formats that we do not explain in detail or mention in <a href="#tbl-file-formats">Table&nbsp;<span>7.1</span></a> due to the book limits. If you need to use other formats, we encourage you to read the GDAL documentation about <a href="https://gdal.org/drivers/vector/index.html">vector</a> and <a href="https://gdal.org/drivers/raster/index.html">raster</a> drivers. Additionally, some spatial data formats can store other data models (types) than vector or raster. It includes LAS and LAZ formats for storing lidar point clouds, and NetCDF and HDF for storing multidimensional arrays.</p>
<p>Finally, spatial data is also often stored using tabular (non-spatial) text formats, including CSV files or Excel spreadsheets. This can be convenient to share spatial datasets with people who, or software that, struggle with spatial data formats.</p>
</section>
<section id="sec-data-input" class="level2" data-number="7.7">
<h2 data-number="7.7" class="anchored" data-anchor-id="sec-data-input"><span class="header-section-number">7.7</span> Data input (I)</h2>
<p>Executing commands such as <code>geopandas.read_file</code> (the main function we use for loading vector data) or <code>rasterio.open</code>+<code>.read</code> (the main functions used for loading raster data) silently sets off a chain of events that reads data from files. Moreover, there are many Python packages containing a wide range of geographic data or providing simple access to different data sources. All of them load the data into the Python environment or, more precisely, assign objects to your workspace, stored in RAM and accessible within the Python session.</p>
<section id="vector-data" class="level3" data-number="7.7.1">
<h3 data-number="7.7.1" class="anchored" data-anchor-id="vector-data"><span class="header-section-number">7.7.1</span> Vector data</h3>
<p>Spatial vector data comes in a wide variety of file formats. Most popular representations such as <code>.shp</code>, <code>.geojson</code>, and <code>.gpkg</code> files can be imported directly into Python with the <code>geopandas</code> function <code>read_file</code>, which uses GDAL‚Äôs vector drivers behind the scenes. <code>geopandas</code> uses GDAL via <code>fiona</code> (the <a href="https://github.com/geopandas/geopandas/issues/2217">default</a>) or <code>pyogrio</code> packages (a recently developed alternative to <code>fiona</code>). After <code>fiona</code> is imported, the command <code>fiona.supported_drivers</code> lists the drivers available to GDAL, including ability to read (<code>r</code>), append (<code>a</code>), and write (<code>w</code>):</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>fiona.supported_drivers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>{'DXF': 'rw',
 'CSV': 'raw',
 'OpenFileGDB': 'raw',
 'ESRIJSON': 'r',
 'ESRI Shapefile': 'raw',
 'FlatGeobuf': 'raw',
 'GeoJSON': 'raw',
 'GeoJSONSeq': 'raw',
 'GPKG': 'raw',
 'GML': 'rw',
 'OGR_GMT': 'rw',
 'GPX': 'rw',
 'MapInfo File': 'raw',
 'DGN': 'raw',
 'S57': 'r',
 'SQLite': 'raw',
 'TopoJSON': 'r'}</code></pre>
</div>
</div>
<p>Other, less common, drivers can be <a href="https://geopandas.org/en/stable/docs/user_guide/io.html">‚Äúactivated‚Äù</a> by manually supplementing <code>fiona.supported_drivers</code>.</p>
<p>The first argument of <code>gpd.read_file</code> is <code>filename</code>, which is typically a string, but can also be a file connection. The content of a string could vary between different drivers. In most cases, as with the ESRI Shapefile (<code>.shp</code>) or the GeoPackage format (<code>.gpkg</code>), the dsn would be a file name. <code>gpd.read_file</code> guesses the driver based on the file extension, as illustrated for a <code>.gpkg</code> file below:</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>gpd.read_file(<span class="st">'data/world.gpkg'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>iso_a2</th>
      <th>name_long</th>
      <th>continent</th>
      <th>...</th>
      <th>lifeExp</th>
      <th>gdpPercap</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>FJ</td>
      <td>Fiji</td>
      <td>Oceania</td>
      <td>...</td>
      <td>69.960000</td>
      <td>8222.253784</td>
      <td>MULTIPOLYGON (((-180.00000 -16....</td>
    </tr>
    <tr>
      <th>1</th>
      <td>TZ</td>
      <td>Tanzania</td>
      <td>Africa</td>
      <td>...</td>
      <td>64.163000</td>
      <td>2402.099404</td>
      <td>MULTIPOLYGON (((33.90371 -0.950...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>EH</td>
      <td>Western Sahara</td>
      <td>Africa</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>MULTIPOLYGON (((-8.66559 27.656...</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>174</th>
      <td>XK</td>
      <td>Kosovo</td>
      <td>Europe</td>
      <td>...</td>
      <td>71.097561</td>
      <td>8698.291559</td>
      <td>MULTIPOLYGON (((20.59025 41.855...</td>
    </tr>
    <tr>
      <th>175</th>
      <td>TT</td>
      <td>Trinidad and Tobago</td>
      <td>North America</td>
      <td>...</td>
      <td>70.426000</td>
      <td>31181.821196</td>
      <td>MULTIPOLYGON (((-61.68000 10.76...</td>
    </tr>
    <tr>
      <th>176</th>
      <td>SS</td>
      <td>South Sudan</td>
      <td>Africa</td>
      <td>...</td>
      <td>55.817000</td>
      <td>1935.879400</td>
      <td>MULTIPOLYGON (((30.83385 3.5091...</td>
    </tr>
  </tbody>
</table>
<p>177 rows √ó 11 columns</p>
</div>
</div>
</div>
<p>For some drivers, such as a File Geodatabase (<code>OpenFileGDB</code>), <code>filename</code> could be provided as a folder name. A GeoJSON string can also be read directly, rather than from a file:</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>gpd.read_file(<span class="st">'{"type":"Point","coordinates":[34.838848,31.296301]}'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>POINT (34.83885 31.29630)</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Alternatively, the <code>gpd.read_postgis</code> function can be used to read a vector layer from a PostGIS database.</p>
<p>Some vector formats, such as GeoPackage, can store multiple data layers. By default, <code>gpd.read_file</code> automatically reads the first layer of the file specified in <code>filename</code>. However, using the <code>layer</code> argument you can specify any other layer.</p>
<p>The <code>gpd.read_file</code> function also allows for reading just parts of the file into RAM with two possible mechanisms. The first one is related to the <code>where</code> argument, which allows specifying what part of the data to read using an SQL <code>WHERE</code> expression. An example below extracts data for Tanzania only (Figure ‚Ä¶). It is done by specifying that we want to get all rows for which <code>name_long</code> equals to <code>"Tanzania"</code>:</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>gpd.read_file(<span class="st">'data/world.gpkg'</span>, where<span class="op">=</span><span class="st">'name_long="Tanzania"'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>iso_a2</th>
      <th>name_long</th>
      <th>continent</th>
      <th>...</th>
      <th>lifeExp</th>
      <th>gdpPercap</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>TZ</td>
      <td>Tanzania</td>
      <td>Africa</td>
      <td>...</td>
      <td>64.163</td>
      <td>2402.099404</td>
      <td>MULTIPOLYGON (((33.90371 -0.950...</td>
    </tr>
  </tbody>
</table>
<p>1 rows √ó 11 columns</p>
</div>
</div>
</div>
<p>Figure‚Ä¶</p>
<p>‚Ä¶</p>
</section>
<section id="raster-data" class="level3" data-number="7.7.2">
<h3 data-number="7.7.2" class="anchored" data-anchor-id="raster-data"><span class="header-section-number">7.7.2</span> Raster data</h3>
</section>
</section>
<section id="sec-data-output" class="level2" data-number="7.8">
<h2 data-number="7.8" class="anchored" data-anchor-id="sec-data-output"><span class="header-section-number">7.8</span> Data output (O)</h2>
<section id="vector-data-1" class="level3" data-number="7.8.1">
<h3 data-number="7.8.1" class="anchored" data-anchor-id="vector-data-1"><span class="header-section-number">7.8.1</span> Vector data</h3>
</section>
<section id="raster-data-1" class="level3" data-number="7.8.2">
<h3 data-number="7.8.2" class="anchored" data-anchor-id="raster-data-1"><span class="header-section-number">7.8.2</span> Raster data</h3>
</section>
</section>
<section id="sec-visual-outputs" class="level2" data-number="7.9">
<h2 data-number="7.9" class="anchored" data-anchor-id="sec-visual-outputs"><span class="header-section-number">7.9</span> Visual outputs</h2>
</section>
<section id="exercises" class="level2" data-number="7.10">
<h2 data-number="7.10" class="anchored" data-anchor-id="exercises"><span class="header-section-number">7.10</span> Exercises</h2>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./07-reproj.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Reprojecting geographic data</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./09-mapping.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Making maps with Python</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>